/*
 LoadGo v2.2 (http://franverona.com/loadgo)
 2017 - Fran Verona
 Licensed under MIT (https://github.com/franverona/loadgo/blob/master/LICENSE)
*/
(function(){var e=function(e,t){for(var i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},t=function(e,t){var i,r,o={};if(void 0===e)r=JSON.parse(JSON.stringify(t)),t.resize&&(r.resize=t.resize),o=r;else if(void 0===t)i=JSON.parse(JSON.stringify(e)),e.resize&&(i.resize=e.resize),o=i;else{i=JSON.parse(JSON.stringify(e)),e.resize&&(i.resize=e.resize),e=i,r=JSON.parse(JSON.stringify(t)),t.resize&&(r.resize=t.resize),t=r,o=e;for(var s in t)o[s]=t[s]}return o},i=function(e){for(var t=0,i=l.length;t<i;t++)if(l[t].id===e)return l[t].properties;return null},r=function(e){for(var t=0,i=l.length;t<i;t++)if(l[t].id===e)return t;return-1},o=function(e){if(void 0===e||null===e)return!1;if("IMG"!==e.nodeName)throw new Error("LoadGo only works on img elements.");if(e.length>1)throw new Error("LoadGo only works on one element at a time. Try with a valid #id.");return!0},s=function(e,t){var i=e.style[t];if("auto"===i){if(-1!==t.toLowerCase().indexOf("left")||-1!==t.toLowerCase().indexOf("right"))return parseFloat(e.offsetLeft);if(-1!==t.toLowerCase().indexOf("top")||-1!==t.toLowerCase().indexOf("bottom"))return parseFloat(e.offsetTop)}return-1!==i.indexOf("px")?parseFloat(i):0},n=function(){return(new Date).getTime().toString()},l=[],a={bgcolor:"#FFFFFF",opacity:"0.5",animated:!0,image:null,class:null,resize:null,direction:"lr",filter:null};Loadgo=window.Loadgo||{},Loadgo.init=function(e,a){if(o(e)){var d=r(e.id);-1===d?(l.push({id:e.id,properties:{}}),d=l.length-1):l[d].properties={};var p=Loadgo.options(e,a),f=document.createElement("div");f.id="loadgo-"+n();var g=["loadgo-overlay"];p.class&&g.push(p.class),f.className=g.join(" "),f.style.backgroundColor=p.bgcolor,f.style.opacity=p.opacity;var y=e.getBoundingClientRect();if(y.width?f.style.width=y.width+"px":f.style.width=e.offsetWidth,y.height?f.style.height=y.height+"px":f.style.height=e.offsetWidth,f.style.position="absolute",p.animated&&(f.style.transition="all 0.6s ease",f.style["-webkit-transition"]="all 0.6s ease",f.style["-moz-transition"]="all 0.6s ease",f.style["-ms-transition"]="all 0.6s ease",f.style["-o-transition"]="all 0.6s ease"),p.filter&&("blur"===p.filter?e.style["-webkit-filter"]=p.filter+"(10px)":"hue-rotate"===p.filter?e.style["-webkit-filter"]=p.filter+"(360deg)":"opacity"===p.filter?e.style["-webkit-filter"]=p.filter+"(0)":e.style["-webkit-filter"]=p.filter+"(1)",p.animated&&(e.style.transition="0.6s filter ease",e.style["-webkit-transition"]="0.6s -webkit-filter ease",e.style["-moz-transition"]="0.6s -moz-filter ease",e.style["-ms-transition"]="0.6s -ms-filter ease",e.style["-o-transition"]="0.6s -o-filter ease")),p.image){var c="100% 0%";"rl"===p.direction?c="0% 50%":"bt"===p.direction?c="100% 0%":"tb"===p.direction&&(c="0% 100%"),f.style["background-image"]='url("'+p.image+'")',f.style["background-repeat"]="no-repeat",f.style["background-size"]="cover",f.style["background-color"]="transparent",f.style["background-position"]=c}var h={progress:0};if(null===p.filter){var u=document.createElement("div");u.className="loadgo-container",u.style.position="relative",e.before(u),u.appendChild(e),u.appendChild(f);var v=s(e,"paddingLeft"),m=s(e,"paddingRight"),w=s(e,"paddingTop"),b=s(e,"paddingBottom"),L=s(e,"marginLeft"),x=s(e,"marginRight"),z=s(e,"marginTop"),k=s(e,"marginBottom");"lr"===p.direction?(f.style.right=m+x+"px",f.style.top=w+z+"px"):"rl"===p.direction?(f.style.left=v+L+"px",f.style.top=w+z+"px"):"bt"===p.direction?(f.style.top=w+z+"px",f.style.left=v+L+"px"):"tb"===p.direction&&(f.style.bottom=b+k+"px",f.style.left=v+L+"px"),h.overlay=f.id,h.width=f.clientWidth,h.height=f.clientHeight}l[d].properties=t(p,h);var N=function(){var t=i(e.id),o=r(e.id);if(null!==t){var n=document.getElementById(t.overlay),a=e.getBoundingClientRect();if(n){a.width?n.style.width=a.width+"px":n.style.width=e.offsetWidth,a.height?n.style.height=a.height+"px":n.style.height=e.offsetWidth;var d=s(e,"paddingLeft"),f=s(e,"paddingRight"),g=s(e,"paddingTop"),y=s(e,"paddingBottom"),c=s(e,"marginLeft"),h=s(e,"marginRight"),u=s(e,"marginTop"),v=s(e,"marginBottom");"lr"===p.direction?(n.style.right=f+h+"px",n.style.top=g+u+"px"):"rl"===p.direction?(n.style.left=d+c+"px",n.style.top=g+u+"px"):"bt"===p.direction?(n.style.top=g+u+"px",n.style.left=d+c+"px"):"tb"===p.direction&&(n.style.bottom=y+v+"px",n.style.left=d+c+"px"),l[o].properties.width=parseFloat(n.style.width),l[o].properties.height=parseFloat(n.style.height),Loadgo.setprogress(e,t.progress)}}};p.resize&&(N=p.resize),window.addEventListener?window.addEventListener("resize",N,!1):window.attachEvent("onresize",N)}},Loadgo.options=function(i,s){if(o(i)){var n=r(i.id);if(-1!==n){var d=l[n].properties;return"{}"!==JSON.stringify(d)?d:(void 0!==s&&void 0!==s.opacity&&(s.opacity=parseFloat(s.opacity)),d="{}"===JSON.stringify(d)?t(a,s):t(d,s),-1===e(["lr","rl","bt","tb"],d.direction.toLowerCase())&&(d.direction="lr"),d.filter&&-1===e(["blur","grayscale","sepia","hue-rotate","invert","opacity"],d.filter.toLowerCase())&&(d.filter=null),l[n].properties=d,d)}}},Loadgo.setprogress=function(e,t){if(o(e)&&!(t<0||t>100)){var s=i(e.id);if(null!==s){var n,a,d=document.getElementById(s.overlay),p=s.width,f=s.height;if(d){var g=s.direction;"lr"===g?(n=p*(1-t/100),d.style.width=n+"px"):"rl"===g?(n=p*(1-t/100),d.style.width=n+"px"):"bt"===g?(a=f*(1-t/100),d.style.height=a+"px"):"tb"===g&&(a=f*(1-t/100),d.style.height=a+"px",d.style.top=f-a+"px")}else{var y;switch(s.filter){case"blur":y=(100-t)/10,e.style["-webkit-filter"]=s.filter+"("+y+"px)";break;case"hue-rotate":y=360*t/100,e.style["-webkit-filter"]=s.filter+"("+y+"deg)";break;case"opacity":y=t/100,e.style["-webkit-filter"]=s.filter+"("+y+")";break;default:y=1-t/100,e.style["-webkit-filter"]=s.filter+"("+y+")"}}}l[r(e.id)].properties.progress=t}},Loadgo.getprogress=function(e){if(o(e)){var t=i(e.id);return null!==t?t.progress:0}},Loadgo.resetprogress=function(e){Loadgo.setprogress(e,0)},Loadgo.loop=function(e,t){if(o(e))if(-1!==r(e.id)){var s=i(e.id);if(null!==s)if(s.interval)console.warn("LoadGo requires you to stop the current loop before modifying it.");else{var n=r(e.id),a=!0;l[n].properties.interval=setInterval(function(){a?(l[n].properties.progress+=1,l[n].properties.progress>=100&&(a=!1)):(l[n].properties.progress-=1,l[n].properties.progress<=0&&(a=!0));var t=document.getElementById(l[n].properties.overlay);t&&(t.style.transition="none",t.style["-webkit-transition"]="none",t.style["-moz-transition"]="none",t.style["-ms-transition"]="none",t.style["-o-transition"]="none"),Loadgo.setprogress(e,l[n].properties.progress)},t)}else console.warn("Element do not have Loadgo properties. Maybe it is uninitialized.")}else console.error('Trying to loop a non initialized element. You have to run "init" method first.')},Loadgo.stop=function(e){o(e)&&(-1!==r(e.id)?(clearInterval(l[r(e.id)].properties.interval),Loadgo.setprogress(e,100)):console.error('Trying to stop loop for a non initialized element. You have to run "init" method first.'))},Loadgo.destroy=function(e){var t=r(e.id);if(-1!==t){var i=Loadgo.options(e);l.splice(t),e.before(o);var o=e.parentNode,s=o.parentNode,n=document.getElementById(i.overlay);n&&n.parentNode&&o.removeChild(i.overlay),s&&(s.appendChild(e),s.removeChild(o))}},window.Loadgo=Loadgo}).call(this);